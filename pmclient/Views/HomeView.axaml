<UserControl xmlns="https://github.com/avaloniaui"
			xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			xmlns:vm="clr-namespace:pmclient.ViewModels"
			xmlns:view="clr-namespace:pmclient.Views"
			mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
			x:Class="pmclient.Views.HomeView"
			x:DataType="vm:HomeViewModel">
	<Design.DataContext>
		<vm:HomeViewModel />
	</Design.DataContext>

	<UserControl.Styles>
		<Style Selector="Border.SBorder">
			<Setter Property="BorderBrush" Value="LightGray" />
			<Setter Property="BorderThickness" Value="2" />
		</Style>
		<Style Selector="Button">
			<Setter Property="CornerRadius" Value="10" />
			<Setter Property="Background" Value="Transparent" />
		</Style>
		<Style Selector="MenuItem.SMenuItem">
			<Setter Property="FontFamily" Value="{DynamicResource Icons}" />
			<Setter Property="Command" Value="{Binding SortCommand}" />
			<Setter Property="CommandParameter" Value="{Binding SelectedIndex, ElementName=SortMenu}" />
		</Style>
	</UserControl.Styles>

	<Border Classes="SBorder">
		<Grid RowDefinitions="Auto, *" ColumnDefinitions="auto, *, 2*">

			<!--Header_Left-->
			<Border Grid.Row="0" Grid.Column="0" Padding="10" Classes="SBorder" BorderThickness="0 0 0 2">
				<DockPanel>
					<!--Refresh-->
					<Button DockPanel.Dock="Right" VerticalAlignment="Center" Command="{Binding LoadDataCommand}">
						<Button.Content>
							<TextBlock Classes="Icon" Text="&#xf021;" FontSize="20" />
						</Button.Content>
					</Button>

					<!--AppName-->
					<TextBlock Text="PassManager" VerticalAlignment="Center" />
				</DockPanel>
			</Border>

			<!--Groups-->
			<TreeView Grid.Row="1" Grid.Column="0" IsEnabled="{Binding IsEnabled}"
					ItemsSource="{Binding CurrentGroups}"
					SelectedItem="{Binding SelectedGroup}">
				<TreeView.ItemTemplate>
					<TreeDataTemplate ItemsSource="{Binding SubGroups}">
						<DockPanel>
							<Button DockPanel.Dock="Right" IsVisible="{Binding IsVisible}"
									Command="{Binding AddCommand}">
								<Button.Content>
									<TextBlock Classes="Icon" Text="&#xf067;" />
								</Button.Content>
							</Button>
							<view:GroupListView />
						</DockPanel>
					</TreeDataTemplate>
				</TreeView.ItemTemplate>
			</TreeView>

			<!--Header_Right-->
			<Border Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Classes="SBorder" BorderThickness="2 0 0 2"
					IsEnabled="{Binding IsEnabled}">
				<Grid ColumnDefinitions="*, Auto, *">
					<StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left" Spacing="10" Margin="10">
						<!--Back-->
						<Button>
							<Button.Content>
								<TextBlock Classes="Icon" Text="&#xf060;" />
							</Button.Content>
						</Button>

						<!--Next-->
						<Button>
							<Button.Content>
								<TextBlock Classes="Icon" Text="&#xf061;" />
							</Button.Content>
						</Button>
					</StackPanel>

					<StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10" Margin="10">
						<!--Search-->
						<TextBox Watermark="Search" Width="280" CornerRadius="10" Text="{Binding Search}" />

						<!--Add-->
						<Button DockPanel.Dock="Right">
							<Button.Content>
								<StackPanel Orientation="Horizontal" Spacing="5">
									<TextBlock Classes="Icon" Text="&#xf067;" />
									<TextBlock Text="New Item" />
								</StackPanel>
							</Button.Content>
							<Button.Flyout>
								<MenuFlyout>
									<MenuItem Header="New Card" Command="{Binding AddCardCommand}"
											IsEnabled="{Binding IsAddEnabled}">
										<MenuItem.Icon>
											<TextBlock Classes="Icon" Text="&#xf2c3;" />
										</MenuItem.Icon>
									</MenuItem>
									<Separator />
									<MenuItem Header="New Group" Command="{Binding AddGroupCommand}"
											IsEnabled="{Binding IsEnabled}">
										<MenuItem.Icon>
											<TextBlock Classes="Icon" Text="&#xf2ba;" />
										</MenuItem.Icon>
									</MenuItem>
								</MenuFlyout>
							</Button.Flyout>
						</Button>
					</StackPanel>
				</Grid>
			</Border>

			<!--Main-->
			<Border Grid.Row="1" Grid.Column="1" Classes="SBorder" BorderThickness="2 0 2 0 "
					IsEnabled="{Binding IsEnabled}">
				<DockPanel>
					<Border Classes="SBorder" DockPanel.Dock="Top" BorderThickness="0 0 0 2">
						<DockPanel Margin="10">
							<!--Sort-->
							<Button DockPanel.Dock="Right">
								<Button.Content>
									<TextBlock Classes="Icon" Text="&#xf161;" />
								</Button.Content>
								<Button.Flyout>
									<Flyout>
										<MenuFlyoutPresenter x:Name="SortMenu" Margin="-15">
											<MenuItem Classes="SMenuItem" Header="&#xf15d; Title" />
											<MenuItem Classes="SMenuItem" Header="&#xf15e; Title" />
											<Separator />
											<MenuItem Classes="SMenuItem" Header="&#xf15d; Website" />
											<MenuItem Classes="SMenuItem" Header="&#xf15e; Website" />
											<Separator />
											<MenuItem Classes="SMenuItem" Header="&#xf15d; Username" />
											<MenuItem Classes="SMenuItem" Header="&#xf15e; Username" />
											<Separator />
											<MenuItem Classes="SMenuItem" Header="&#xf161; Auto" />
										</MenuFlyoutPresenter>
									</Flyout>
								</Button.Flyout>
							</Button>
						</DockPanel>
					</Border>

					<!--Cards-->
					<ListBox ItemsSource="{Binding CurrentCards}"
							SelectedItem="{Binding SelectedCard}"
							SelectedIndex="{Binding SelectedCardIndex}">
						<ListBox.ItemTemplate>
							<DataTemplate>
								<StackPanel>
									<view:CardListView />
								</StackPanel>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
				</DockPanel>
			</Border>

			<!--Card-->
			<Panel Grid.Row="1" Grid.Column="2">
				<ContentControl Content="{Binding SelectedCard}" Background="White" />
				<ContentControl Content="{Binding SelectedGroup}" IsVisible="{Binding IsGroupAdd}" />
			</Panel>
		</Grid>
	</Border>
</UserControl>